!function(a){a.fn.instaRow=function(b){var c=["https://crossorigin.me/{url}","http://cors.io/?u={url}","https://jsonp.afeld.me/?url={url}"],d=function(a,b,c){return a.replace(b,c)},e=function(a,b){var e=c[a];return e&&e.indexOf("{url}")>=0?d(e,"{url}",b):!1};return this.each(function(){var c,f,g,h,i,j,k,l,m,n,o,p,q=a(this);c=a.extend({onSuccess:null,onError:null,user:"self",items:10,target:"_blank",linkText:"{user} on Instagram"},b),f=0,g="https://www.instagram.com/"+c.user,h=function(b){var c=!1;return a(b+':contains("script")').each(function(){if(a(this).children().length<1&&""!=a.trim(a(this).text()).length){var b=a(this).text();null!=b.match(/^window._sharedData/)&&(c=a.parseJSON(b.replace("window._sharedData = ","").slice(0,-1)))}}),c},i=function(a){var b=h(a);arg=arguments;try{b.entry_data.ProfilePage[0].user.media.nodes?(p(b.entry_data.ProfilePage[0].user.media.nodes),"function"==typeof c.onSuccess&&c.onSuccess.apply(this,arguments)):j.apply(this,arg)}catch(d){j.apply(this,arg)}},j=function(){"function"==typeof c.onError&&c.onError.apply(this,arguments)},k=function(){f++,l()||j.apply(this,arguments)},l=function(){var b=e(f,g);return b?a.ajax({method:"GET",url:b,success:i.bind(this),error:k.bind(this)}):!1},m=function(a){var b;return b=a.caption?"string"==typeof a.caption?a.caption:a.caption.text:"Image"},n=function(a){var b;return a.thumbnail_src?b=a.thumbnail_src:a.images&&(a.images.standard_resolution&&a.images.standard_resolution.url?b=a.images.standard_resolution.url:a.images.low_resolution&&a.images.low_resolution.url?b=a.images.low_resolution.url:a.images.thumbnail&&a.images.thumbnail.url&&(b=a.images.thumbnail.url)),b},o=function(a){var b;return b="string"==typeof a.link?a.link:a.code?"http://www.instagram.com/p/"+a.code:g},p=function(b){var e=0;q.html("").addClass("instarow");for(var f in b){var h,i,j,k=b[f];if(e>=c.items)break;k.type&&"image"!==k.type||(i=n(k),i&&(h=m(k),j=o(k),q.append(a("<div>").addClass("instarow__image").append(a("<a>").css("background-image","url("+i+")").attr({href:j,title:h,target:c.target}).html(h))),e++))}q.append(a("<div>").addClass("instarow__link").append(a("<a>").attr({href:g,target:c.target}).append(a("<span>").append(a("<span>").html(d(c.linkText,"{user}",c.user))))))},l()})}}(jQuery);