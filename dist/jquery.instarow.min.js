!function(a){a.fn.instaRow=function(b){var c=["https://crossorigin.me/{url}","http://cors.io/?u={url}","https://jsonp.afeld.me/?url={url}"],d=function(a,b,c){return a.replace(b,c)},e=function(a,b){var e=c[a];return e&&e.indexOf("{url}")>=0?d(e,"{url}",b):!1};return this.each(function(){var c,f,g,h,i,j,k,l,m,n,o,p,q,r=a(this);c={onSuccess:null,onError:null,user:"self",items:10,target:"_blank",linkText:"{user} on Instagram"},r.data("instarow-user")&&(c.user=r.data("instarow-user")),r.data("instarow-items")&&(c.items=r.data("instarow-items")),r.data("instarow-link-text")&&(c.linkText=r.data("instarow-link-text")),r.data("instarow-target")&&(c.target=r.data("instarow-target")),f=a.extend(c,b),g=0,h="https://www.instagram.com/"+f.user,i=function(b){var c=!1;return a(b+':contains("script")').each(function(){if(a(this).children().length<1&&""!=a.trim(a(this).text()).length){var b=a(this).text();null!=b.match(/^window._sharedData/)&&(c=a.parseJSON(b.replace("window._sharedData = ","").slice(0,-1)))}}),c},j=function(a){var b=i(a);arg=arguments;try{b.entry_data.ProfilePage[0].user.media.nodes?(q(b.entry_data.ProfilePage[0].user.media.nodes),"function"==typeof f.onSuccess&&f.onSuccess.apply(this,arguments)):k.apply(this,arg)}catch(c){k.apply(this,arg)}},k=function(){"function"==typeof f.onError&&f.onError.apply(this,arguments)},l=function(){g++,m()||k.apply(this,arguments)},m=function(){var b=e(g,h);return b?a.ajax({method:"GET",url:b,success:j.bind(this),error:l.bind(this)}):!1},n=function(a){var b;return b=a.caption?"string"==typeof a.caption?a.caption:a.caption.text:"Image"},o=function(a){var b;return a.thumbnail_src?b=a.thumbnail_src:a.images&&(a.images.standard_resolution&&a.images.standard_resolution.url?b=a.images.standard_resolution.url:a.images.low_resolution&&a.images.low_resolution.url?b=a.images.low_resolution.url:a.images.thumbnail&&a.images.thumbnail.url&&(b=a.images.thumbnail.url)),b},p=function(a){var b;return b="string"==typeof a.link?a.link:a.code?"http://www.instagram.com/p/"+a.code:h},q=function(b){var c=0;r.html("").addClass("instarow");for(var e in b){var g,i,j,k=b[e];if(c>=f.items)break;k.type&&"image"!==k.type||(i=o(k),i&&(g=n(k),j=p(k),r.append(a("<div>").addClass("instarow__image").append(a("<a>").css("background-image","url("+i+")").attr({href:j,title:g,target:f.target}).html(g))),c++))}r.append(a("<div>").addClass("instarow__link").append(a("<a>").attr({href:h,target:f.target}).append(a("<span>").append(a("<span>").html(d(f.linkText,"{user}",f.user))))))},m()})}}(jQuery);