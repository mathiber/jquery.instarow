!function(a){a.fn.instaRow=function(b){var c=["http://cors.io/?u={url}","https://jsonp.afeld.me/?url={url}","https://crossorigin.me/{url}"],d=function(a,b,c){return a.replace(b,c)},e=function(a,b){var e=c[a];return e&&e.indexOf("{url}")>=0?d(e,"{url}",b):!1},f=function(a){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);var b,c=0;for(b=0;3>b;b++)c+=Math.round(Math.min(Math.max(0,parseInt(a.substr(2*b,2),16)),255));return c/3};return this.each(function(){var c,g,h,i,j,k,l,m,n,o,p,q,r,s=a(this);c={onSuccess:null,onError:null,user:"self",items:10,target:"_blank",linkText:"{user} on Instagram",linkColor:null,proxy:null,timeout:2e3},s.data("instarow-user")&&(c.user=s.data("instarow-user")),s.data("instarow-items")&&(c.items=s.data("instarow-items")),s.data("instarow-link-text")&&(c.linkText=s.data("instarow-link-text")),s.data("instarow-link-color")&&(c.linkColor=s.data("instarow-link-color")),s.data("instarow-target")&&(c.target=s.data("instarow-target")),s.data("instarow-proxy")&&(c.proxy=s.data("instarow-proxy")),s.data("instarow-timeout")&&(c.timeout=s.data("instarow-timeout")),g=a.extend(c,b),h=0,i="https://www.instagram.com/"+g.user,j=function(b){var c=!1;return a(b+':contains("script")').each(function(){if(a(this).children().length<1&&""!=a.trim(a(this).text()).length){var b=a(this).text();null!=b.match(/^window._sharedData/)&&(c=a.parseJSON(b.replace("window._sharedData = ","").slice(0,-1)))}}),c},k=function(a){var b=j(a);arg=arguments;try{b.entry_data.ProfilePage[0].user.media.nodes?(r(b.entry_data.ProfilePage[0].user.media.nodes),"function"==typeof g.onSuccess&&g.onSuccess.apply(this,arguments)):l.apply(this,arg)}catch(c){l.apply(this,arg)}},l=function(){"function"==typeof g.onError&&g.onError.apply(this,arguments)},m=function(){h++,n()||l.apply(this,arguments)},n=function(){var b;return g.proxy,b=g.proxy?0===h?d(g.proxy,"{url}",i):e(h-1,i):e(h,i),b?a.ajax({method:"GET",url:b,success:k.bind(this),error:m.bind(this),timeout:g.timeout}):!1},o=function(a){var b;return b=a.caption?"string"==typeof a.caption?a.caption:a.caption.text:"Image"},p=function(a){var b;return a.thumbnail_src?b=a.thumbnail_src:a.images&&(a.images.standard_resolution&&a.images.standard_resolution.url?b=a.images.standard_resolution.url:a.images.low_resolution&&a.images.low_resolution.url?b=a.images.low_resolution.url:a.images.thumbnail&&a.images.thumbnail.url&&(b=a.images.thumbnail.url)),b},q=function(a){var b;return b="string"==typeof a.link?a.link:a.code?"http://www.instagram.com/p/"+a.code:i},r=function(b){var c=0;s.html("").addClass("instarow");for(var e in b){var h,j,k,l=b[e];if(c>=g.items)break;l.type&&"image"!==l.type||(j=p(l),j&&(h=o(l),k=q(l),s.append(a("<div>").addClass("instarow__image").append(a("<a>").css("background-image","url("+j+")").attr({href:k,title:h,target:g.target}).html(h))),c++))}s.append(a("<div>").addClass("instarow__link").css("background-color",function(){if(g.linkColor){var b=f(g.linkColor);return 130>b&&a(this).addClass("instarow__link--dark"),g.linkColor}return null}).append(a("<a>").attr({href:i,target:g.target}).append(a("<span>").append(a("<span>").html(d(g.linkText,"{user}",g.user))))))},n()})}}(jQuery);